<?php
$user_id = $this->user ? $this->user->id : null;
$ownerName = $this->is_new ? $this->user->Name : $this->comment->owner_name;
$ownerThumb = $this->is_new ?
	Application_Model_User::getThumb($this->user, '55x55') :
	Application_Model_User::getThumb($this->comment, '55x55',
		['alias' => 'owner_']);
$profileUrl = $this->user ?
	$this->baseUrl('home/profile/user/' . $this->comment->user_id) : '#';

$timeAttr = '';
$timeVal = '';

if ($this->user)
{
	$createdAt = new DateTime($this->comment->created_at);
	$timeVal = My_Time::time_ago($createdAt);
	$createdAt->setTimezone($this->user->getTimezone());
	$timeAttr = 'title="' . $createdAt->format(My_Time::OUTPUT) . '"';
}
else
{
	$timeAttr = 'data-time="' . (new DateTime($this->comment->created_at))
		->format('c') . '"';
}
?>
<div class="post-comment__item" data-id="<?php echo $this->comment->id; ?>">
<a class="post-comment__item-owner" href="<?php echo $profileUrl; ?>">
<img width="43" height="43"
src="<?php echo $this->baseUrl($ownerThumb); ?>"
alt="<?php echo $ownerName; ?>">
</a>
<?php if ($user_id == $this->post->user_id || $user_id == $this->comment->user_id): ?>
<div class="post-comment__delete">
<img width="12" height="12" src="<?php echo $this->baseUrl('www/images/delete-icon12x12.png'); ?>" alt="delete">
</div>
<?php endif; ?>
<div class="post-comment__body">
<a href="<?php echo $profileUrl; ?>"
class="post-coment-user-name"><?php echo $ownerName; ?>:</a>
<span><?php echo $this->comment->renderContent(My_ArrayHelper::getProp($this, 'limit', false)); ?></span>
<p class="post-coment__date" <?php echo $timeAttr; ?>><?php echo $timeVal; ?></p>
</div>
</div>
