<?php
// TODO: refactoring
$auth = Zend_Auth::getInstance()->getIdentity();
$auth_user_id = !empty($auth['user_id']) ? $auth['user_id'] : null;
$created_at = isset($this->comment['created_at']) ? $this->comment['created_at'] : date('c');
$user = $this->comment->findDependentRowset('Application_Model_User')->current();
?>
<li>
	<div>
		<a href="<?php echo $this->baseUrl("home/profile/user/" . $user->id); ?>">
			<img src="<?php echo $user->getProfileImage($this->baseUrl('www/images/img-prof40x40.jpg')); ?>" />
		</a>
	</div>
	<ul>
		<?php if ($auth_user_id == $this->post->user_id || $auth_user_id == $this->comment->user_id): ?>
		<div>
			<img src="<?php echo $this->baseUrl("www/images/delete-icon.png"); ?>" />
		</div>
		<?php endif; ?>
		<li>
			<div>
				<a href="<?php echo $this->baseUrl("home/profile/user/" . $user->id); ?>"><?php echo $user->Name; ?>:</a>
				<span><?php echo $this->comment->renderContent(My_ArrayHelper::getProp($this, 'limit', false)); ?></span>
			</div>
		</li>
		<li>
			<p><?php echo My_Time::time_ago($created_at); ?></p>
		</li>
	</ul>
</li>
